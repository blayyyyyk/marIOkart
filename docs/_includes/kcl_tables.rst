:orphan:

.. _kcl-table-prisms:

Prism Entry Layout (Size: ``0x10``)
-----------------------------------

+---------+--------+--------------+--------------------------------------------+
|Offset   | Type   | Name         | Description                                |
+=========+========+==============+============================================+
|``0x00`` |``f32`` |``height``    | Prism height from vertex 1 to opposite side|
+---------+--------+--------------+--------------------------------------------+
|``0x04`` |``u16`` |``pos_i``     | Index of first vertex in positions array   |
+---------+--------+--------------+--------------------------------------------+
|``0x06`` |``u16`` |``fnrm_i``    | Face normal index                          |
+---------+--------+--------------+--------------------------------------------+
|``0x08`` |``u16`` |``enrm1_i``   | Edge normal A index                        |
+---------+--------+--------------+--------------------------------------------+
|``0x0A`` |``u16`` |``enrm2_i``   | Edge normal B index                        |
+---------+--------+--------------+--------------------------------------------+
|``0x0C`` |``u16`` |``enrm3_i``   | Edge normal C index                        |
+---------+--------+--------------+--------------------------------------------+
|``0x0E`` |``u16`` |``attributes``| Collision attributes                       |
+---------+--------+--------------+--------------------------------------------+


.. _kcl-table:

Header Layout
-------------

+----------+---------+----------------------------+--------------------------------------------+
|Offset    | Type    | Name                       | Description                                |
+==========+=========+============================+============================================+
|``0x00``  |``u32``  | ``positions_offset``       | Offset to vertex positions section         |
+----------+---------+----------------------------+--------------------------------------------+
|``0x04``  |``u32``  | ``normals_offset``         | Offset to normal vectors section           |
+----------+---------+----------------------------+--------------------------------------------+
|``0x08``  |``u32``  | ``prisms_offset``          | Offset to triangular prisms section        |
+----------+---------+----------------------------+--------------------------------------------+
|``0x0C``  |``u32``  | ``block_data_offset``      | Offset to octree blocks                    |
+----------+---------+----------------------------+--------------------------------------------+
|``0x10``  |``f32``  | ``prism_thickness``        | Depth of triangular prism along normal     |
+----------+---------+----------------------------+--------------------------------------------+
|``0x14``  |``Vec3`` | ``area_min_pos``           | Minimum coordinates of model bounding box  |
+----------+---------+----------------------------+--------------------------------------------+
|``0x20``  |``u32``  | ``area_x_width_mask``      | X-axis mask for octree                     |
+----------+---------+----------------------------+--------------------------------------------+
|``0x24``  |``u32``  | ``area_y_width_mask``      | Y-axis mask for octree                     |
+----------+---------+----------------------------+--------------------------------------------+
|``0x28``  |``u32``  | ``area_z_width_mask``      | Z-axis mask for octree                     |
+----------+---------+----------------------------+--------------------------------------------+
|``0x2C``  |``u32``  | ``block_width_shift``      | Octree leaf block size shift               |
+----------+---------+----------------------------+--------------------------------------------+
|``0x30``  |``u32``  | ``area_x_blocks_shift``    | Root child index shift (Y axis)            |
+----------+---------+----------------------------+--------------------------------------------+
|``0x34``  |``u32``  | ``area_xy_blocks_shift``   | Root child index shift (Z axis)            |
+----------+---------+----------------------------+--------------------------------------------+
|``0x38``  |``f32?`` | ``sphere_radius``          | Optional: max sphere radius for collisions |
+----------+---------+----------------------------+--------------------------------------------+

.. _kcl-end: