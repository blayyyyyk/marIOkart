from ctypes import *
from private.mkds_python_bindings.pointer import POINTER32, c_void_p32
from private.mkds_python_bindings.generated.darray import *
from private.mkds_python_bindings.generated.gsPlatform import *
from private.mkds_python_bindings.generated.gsPlatformSocket import *
from private.mkds_python_bindings.generated.gt2 import *
from private.mkds_python_bindings.generated.hashtable import *

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2UdpProtocol = 0
GTI2VdpProtocol = 2
GTI2AdHocProtocol = 3

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2AwaitingServerChallenge = 0
GTI2AwaitingAcceptance = 1
GTI2AwaitingClientChallenge = 2
GTI2AwaitingClientResponse = 3
GTI2AwaitingAcceptReject = 4
GTI2Connected = 5
GTI2Closing = 6
GTI2Closed = 7

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104

GTI2MsgAppReliable = 0
GTI2MsgClientChallenge = 1
GTI2MsgServerChallenge = 2
GTI2MsgClientResponse = 3
GTI2MsgAccept = 4
GTI2MsgReject = 5
GTI2MsgClose = 6
GTI2MsgKeepAlive = 7
GTI2NumReliableMessages = 8
GTI2MsgAck = 100
GTI2MsgNack = 101
GTI2MsgPing = 102
GTI2MsgPong = 103
GTI2MsgClosed = 104


class GTI2IncomingBufferMessage(Structure):
    _fields_ = [
        ('start', c_int),
        ('len', c_int),
        ('type', GTI2MessageType),
        ('serialNumber', c_short),
    ]

class GTI2OutgoingBufferMessage(Structure):
    _fields_ = [
        ('start', c_int),
        ('len', c_int),
        ('serialNumber', c_short),
        ('lastSend', gsi_time),
    ]

class GTI2Connection(Structure):
    _fields_ = [
        ('ip', c_int),
        ('port', c_short),
        ('socket', POINTER32(GTI2Socket)),
        ('state', GTI2ConnectionState),
        ('initiated', GT2Bool),
        ('freeAtAcceptReject', GT2Bool),
        ('connectionResult', GT2Result),
        ('startTime', gsi_time),
        ('timeout', gsi_time),
        ('callbackLevel', c_int),
        ('callbacks', GT2ConnectionCallbacks),
        ('initialMessage', POINTER32(c_char)),
        ('initialMessageLen', c_int),
        ('data', c_void_p32),
        ('incomingBuffer', GTI2Buffer),
        ('outgoingBuffer', GTI2Buffer),
        ('incomingBufferMessages', DArray),
        ('outgoingBufferMessages', DArray),
        ('serialNumber', c_short),
        ('expectedSerialNumber', c_short),
        ('response', (c_char * 32)),
        ('lastSend', gsi_time),
        ('challengeTime', gsi_time),
        ('pendingAck', GT2Bool),
        ('pendingAckTime', gsi_time),
        ('sendFilters', DArray),
        ('receiveFilters', DArray),
    ]

class GTI2MacEntry(Structure):
    _fields_ = [
        ('ip', gsi_u32),
        ('mac', (c_char * 6)),
    ]
GTI2MessageType = c_int

class GTI2Socket(Structure):
    _fields_ = [
        ('socket', SOCKET),
        ('ip', c_int),
        ('port', c_short),
        ('connections', HashTable),
        ('closedConnections', DArray),
        ('close', GT2Bool),
        ('error', GT2Bool),
        ('callbackLevel', c_int),
        ('connectAttemptCallback', gt2ConnectAttemptCallback),
        ('socketErrorCallback', gt2SocketErrorCallback),
        ('sendDumpCallback', gt2DumpCallback),
        ('receiveDumpCallback', gt2DumpCallback),
        ('unrecognizedMessageCallback', gt2UnrecognizedMessageCallback),
        ('data', c_void_p32),
        ('outgoingBufferSize', c_int),
        ('incomingBufferSize', c_int),
        ('protocolType', GTI2ProtocolType),
        ('protocolOffset', c_int),
        ('broadcastEnabled', GT2Bool),
    ]

class GTI2Buffer(Structure):
    _fields_ = [
        ('buffer', POINTER32(GT2Byte)),
        ('size', c_int),
        ('len', c_int),
    ]
GTI2ConnectionState = c_int
GTI2ProtocolType = c_int
